<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Minuscule Posets: Ideals, Weights, and Equivariance</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="hero">
      <h1 id="hero-title">Minuscule Posets Explorer</h1>
      <p id="hero-subtitle">
        Interactive model for the bijection
        <code>&phi;: J(P) &rarr; W&middot;&omega;<sub>k</sub></code>
        and equivariance
        <code>&phi;(t<sub>i</sub>(I)) = s<sub>i</sub>(&phi;(I))</code>.
      </p>
    </header>

    <main class="layout">
      <section class="panel controls">
        <div class="control-block">
          <h2>Representation</h2>
          <div class="grid-controls">
            <label for="lie-type">
              Lie type
              <select id="lie-type"></select>
            </label>
            <label for="rank-n">
              Rank <code>n</code>
              <select id="rank-n"></select>
            </label>
            <label for="weight-k">
              Minuscule weight <code>&omega;<sub>k</sub></code>
              <select id="weight-k"></select>
            </label>
            <button id="rebuild" type="button">Build Poset</button>
            <button id="reset-ideal" type="button">Reset to Empty Ideal</button>
          </div>
        </div>

        <div class="control-block">
          <h2>Simple-Root Action</h2>
          <p class="small">
            <code>t<sub>i</sub></code> toggles all elements with integer label
            <code>i</code> (single-element toggles on the same label commute).
          </p>
          <div id="root-buttons" class="root-buttons"></div>
        </div>

        <div class="control-block">
          <h2>Fon-Der-Flaass Action</h2>
          <p class="small">
            Toggle ranks from top to bottom.
          </p>
          <button id="apply-fon-der-flaass" type="button">Apply Fon-Der-Flaass Action</button>
        </div>

        <div class="control-block">
          <h2>Coxeter Motion</h2>
          <p class="small">
            Build Coxeter elements by giving a permutation of simple reflections.
            Example: <code>2 1 3</code>.
          </p>
          <div class="coxeter-builder">
            <label for="coxeter-order">
              Ordering of simple reflections
              <input id="coxeter-order" type="text" placeholder="e.g. 2 1 3 or s2 s1 s3" />
            </label>
            <button id="add-coxeter" type="button">Build Coxeter Element</button>
          </div>
          <div id="coxeter-feedback" class="small muted">No Coxeter elements added yet.</div>
          <div id="coxeter-list" class="coxeter-list"></div>
        </div>

        <div class="control-block">
          <h2>Orbit Witness</h2>
          <p class="small">
            Animate one full orbit from the current ideal and compare orbit averages with paper predictions.
          </p>
          <div class="orbit-controls">
            <label for="orbit-action">
              Action
              <select id="orbit-action"></select>
            </label>
            <label for="orbit-speed">
              Step delay (ms)
              <input id="orbit-speed" type="range" min="250" max="2000" step="50" value="750" />
            </label>
            <div id="orbit-speed-value" class="small muted">750 ms</div>
            <div class="orbit-buttons">
              <button id="play-orbit" type="button">Play Orbit</button>
              <button id="stop-orbit" type="button">Stop</button>
            </div>
          </div>
          <div id="orbit-status" class="small muted">No orbit animation yet.</div>
        </div>

        <div class="control-block">
          <h2>Global Check</h2>
          <p class="small">
            Verifies ideal count, bijectivity of <code>&phi;</code>, and full
            equivariance over all <code>I</code> and all simple roots.
          </p>
          <button id="verify-all" type="button">Run Exhaustive Verification</button>
          <div id="global-report" class="report muted">No global check yet.</div>
        </div>

        <div class="control-block">
          <details class="dev-notes" id="developer-notes">
            <summary>Developer / Math Notes</summary>
            <div class="dev-notes-body">
              <p class="small">
                This app builds the minuscule poset <code>P</code> attached to the chosen
                minuscule representation <code>V(&omega;<sub>k</sub>)</code>. For type A this is
                the rectangle model <code>P<sub>n,k</sub> = [k] &times; [n+1-k]</code> with
                <code>label(r,c) = k-r+c</code>.
              </p>
              <p class="small">
                Root-toggle order-independence is checked directly on every ideal:
                for each simple root label <code>i</code>, this app compares toggling all
                <code>i</code>-labeled elements in forward and reverse index order.
                It also checks the cover-edge property (no cover relation between nodes with the same label),
                and reports a concrete counterexample if anything fails.
              </p>
              <div id="developer-analysis" class="report muted">No analysis yet.</div>
            </div>
          </details>
        </div>
      </section>

      <section class="panel viz">
        <h2>Minuscule Poset</h2>
        <p class="small">
          Click a node for a single-element toggle. Filled nodes are in the current order ideal.
        </p>
        <svg id="poset-svg" role="img" aria-label="Minuscule poset diagram"></svg>
        <div class="legend">
          <span><i class="swatch in-ideal"></i> in ideal</span>
          <span><i class="swatch can-add"></i> can be added</span>
          <span><i class="swatch can-remove"></i> can be removed</span>
        </div>
      </section>

      <section class="panel state">
        <h2>Current State</h2>
        <div id="current-ideal" class="report"></div>
        <div id="current-weight" class="report"></div>

        <h2>Representation Facts</h2>
        <div id="representation-facts" class="report"></div>

        <h2>Last Action</h2>
        <div id="action-report" class="report muted">No action applied yet.</div>

        <h2>Orbit Report</h2>
        <div id="orbit-report" class="report muted">No orbit run yet.</div>
      </section>
    </main>

    <footer class="footnote">
      <p id="representation-footnote">
        Supports minuscule posets in types <code>A</code>, <code>D</code>, and <code>E</code>.
      </p>
    </footer>

    <script src="core.js"></script>
    <script src="ui.js"></script>
    <script src="app.js"></script>
  </body>
</html>
